---
- name: ensure splunk home directory exists
  ansible.builtin.file:
    path: '{{ splunk_home }}'
    state: directory

- name: install splunk from tar file
  ansible.builtin.unarchive:
    src: '{{ splunk_binary }}'
    dest: '{{ splunk_home }}'
    extra_opts:
      - --strip-components=1